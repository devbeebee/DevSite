<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title id="seotitle">Unity3D Open World Project -DevBeeBee</title>
    <meta id="seokeys" name="keywords" content="Unity3D, Open World, Project">
    <meta id="seodescription" name="description" content="">
    <meta name=”robots” content="index, follow">
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="true" />

    <link id="codeCSS" rel="stylesheet" href="/css/hybrid.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="/css/my.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script type="text/javascript" src="/js/jszip.js"></script>
    <script type="text/javascript" src="/js/jQuery.js"></script>
    <script type="text/javascript" src="/js/savecs.js"></script>
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9754975194862641" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122930112-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-122930112-1');
    </script>
    <style>
        #spoilern {
            width: 100%;
            padding: 50px 0;
            text-align: center;
            background-color: lightblue;
            margin-top: 20px;
        }

        #spoilerbtnn {
            -webkit-text-size-adjust: 100%;
            box-sizing: inherit;
            font: inherit;

            text-transform: none;
            -webkit-appearance: button;
            color: #fff !important;
            background-color: #616161 !important;
            border: none;
            border-radius: 5px;
            padding: 8px 16px;
            vertical-align: middle;
            overflow: hidden;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            white-space: nowrap;
            user-select: none;
            box-shadow: none;

            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        pre {
            width: 90%;
            margin: 20px;
            margin-left: 5%;
            margin-top: 4px;
            /* margin: -20px; */
        }

        .collapsible {
            background-color: #777;
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
        }

            .active, .collapsible:hover {
                background-color: #555;
            }

        .content {
            display: none;
            overflow: hidden;
        }

    </style>
</head>

<body class="w3-content" style="max-width:1600px">

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-collapse w3-animate-left" style="background-color: #0b0b0b; z-index:3;width:300px;" id="mySidebar">
        <br>
        <div class="w3-container">
            <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
                <i class="fa fa-remove"></i>
            </a>

            <h4><b>DevBeeBee</b></h4>
            <p class="w3-text-grey">A Place for all the thing's i have learned around coding.</p>
        </div>
        <div class="w3-bar-block">
            <a href="/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-text-teal">
                <i class="fa fa-th-large fa-fw w3-margin-right"></i>Home
            </a>
            <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-padding myNav">
                <i class="fa fa-user fa-fw w3-margin-right"></i>C# & Unity
            </a>
            <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-padding myNav">
                <i class="fa fa-user fa-fw w3-margin-right"></i>HTML JS CSS
            </a>
        </div>
        <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="devbeebee" data-color="#5F7FFF" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff"
                data-coffee-color="#FFDD00"></script>
    </nav>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:300px">

        <!-- Header -->
        <header id="portfolio">

            <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()">
                <i class="fa fa-bars"></i>
            </span>
            <div class="w3-container">
                <h1 id="pagename" style="text-align: center;"><b>Terrain Editorv2</b></h1>
            </div>
        </header>
        
        <p style='text-align: center;font-variant: small-caps;'><a href='/Open World/'>Open World</a> - <a href='/Open World/scripts'>Scripts</a> -  Terrain Editorv2</p><h1>TITLE</h1>
        <div id="mainscript">
            <h4 style="text-align: center;" id="mainscriptname">TerrainEditorv2.cs <sup >11.7KB</sup></h4>
            <p style='text-align:center;'><p style='text-align:center;'><a href='/Open World/scripts/New Input'>New Input</a> <sup >3.9KB</sup></p><p style='text-align:center;'><a href='/Open World/scripts/Texture Scale'>Texture Scale</a> <sup >4.7KB</sup></p></p>
            <button class='center'onclick='create_zip()'>Download (3) Files 20.2KB</button><br>
            <pre ><code style='font-size: 12px;'class='language-csharp hljs'id='mainscriptcode'>using UnityEngine;

public class TerrainEditorv2 : MonoBehaviour
{
    public enum DeformMode { RaiseLower, Flatten, Smooth }
    DeformMode deformMode = DeformMode.RaiseLower;
    string[] deformModeNames = new string[] { &quot;Raise Lower&quot;, &quot;Flatten&quot;, &quot;Smooth&quot; };

    public Terrain terrain;
    public Texture2D deformTexture;
    public float strength = 1;
    public float area = 1;
    public bool showHelp;

    Transform buildTarget;
    Vector3 buildTargPos;
    Light spotLight;

    //GUI
    Rect windowRect = new Rect(10, 10, 400, 185);
    bool onWindow = false;
    bool onTerrain;
    Texture2D newTex;
    float strengthSave;

    //Raycast
    private RaycastHit hit;

    //Deformation variables
    private int xRes;
    private int yRes;
    private float[,] saved;
    float flattenTarget = 0;
    Color[] craterData;

    TerrainData tData;

    float strengthNormalized
    {
        get
        {
            return (strength) / 9.0f;
        }
    }

    // Start is called before the first frame update
    void Start()
    {
        //Create build target object
        GameObject tmpObj = new GameObject(&quot;BuildTarget&quot;);
        buildTarget = tmpObj.transform;

        //Add Spot Light to build target
        GameObject spotLightObj = new GameObject(&quot;SpotLight&quot;);
        spotLightObj.transform.SetParent(buildTarget);
        spotLightObj.transform.localPosition = new Vector3(0, 2, 0);
        spotLightObj.transform.localEulerAngles = new Vector3(90, 0, 0);
        spotLight = spotLightObj.AddComponent&lt;Light&gt;();
        spotLight.type = LightType.Spot;
        spotLight.range = 20;

        tData = terrain.terrainData;
        if (tData)
        {
            //Save original height data
            xRes = tData.heightmapResolution;
            yRes = tData.heightmapResolution;
            saved = tData.GetHeights(0, 0, xRes, yRes);
        }

        //Change terrain layer to UI
        terrain.gameObject.layer = 5;
        strength = 2;
        area = 2;
        brushScaling();
    }

    void FixedUpdate()
    {
        raycastHit();
        //wheelValuesControl();

        if (onTerrain &amp;&amp; !onWindow)
        {
            terrainDeform();
        }

        //Update Spot Light Angle according to the Area value
        spotLight.spotAngle = area * 25f;
    }

    //Raycast
    //______________________________________________________________________________________________________________________________
    void raycastHit()
    {
        Ray ray = Camera.main.ScreenPointToRay(Camera.main.ScreenToWorldPoint(NewInput.Instance.RawLook));
        hit = new RaycastHit();
        //Do Raycast hit only against UI layer
        if (Physics.Raycast(ray, out hit, 300, 1 &lt;&lt; 5))
        {
            onTerrain = true;
            if (buildTarget)
            {
                buildTarget.position = Vector3.Lerp(buildTarget.position, hit.point + new Vector3(0, 1, 0), Time.time);
            }
        }
        else
        {
            if (buildTarget)
            {
                Vector3 curScreenPoint = new Vector3(NewInput.Instance.RawLook.x, NewInput.Instance.RawLook.y, 200);
                Vector3 curPosition = Camera.main.ScreenToWorldPoint(curScreenPoint);
                buildTarget.position = curPosition;
                onTerrain = false;
            }
        }
    }

    //TerrainDeformation
    //___________________________________________________________________________________________________________________
    void terrainDeform()
    {
        if (Input.GetMouseButtonDown(0))
        {
            buildTargPos = buildTarget.position - terrain.GetPosition();
            float x = Mathf.Clamp01(buildTargPos.x / tData.size.x);
            float y = Mathf.Clamp01(buildTargPos.z / tData.size.z);
            flattenTarget = tData.GetInterpolatedHeight(x, y) / tData.heightmapScale.y;
        }

        //Terrain deform
        if (NewInput.Instance.RawFire &gt; 0)
        {

            buildTargPos = buildTarget.position - terrain.GetPosition();

            if (NewInput.Instance.RawAim&gt;0)
            {
                strengthSave = strength;
            }
            else
            {
                strengthSave = -strength;
            }

            if (newTex &amp;&amp; tData &amp;&amp; craterData != null)
            {
                int x = (int)Mathf.Lerp(0, xRes, Mathf.InverseLerp(0, tData.size.x, buildTargPos.x));
                int z = (int)Mathf.Lerp(0, yRes, Mathf.InverseLerp(0, tData.size.z, buildTargPos.z));
                x = Mathf.Clamp(x, newTex.width / 2, xRes - newTex.width / 2);
                z = Mathf.Clamp(z, newTex.height / 2, yRes - newTex.height / 2);
                int startX = x - newTex.width / 2;
                int startY = z - newTex.height / 2;
                float[,] areaT = tData.GetHeights(startX, startY, newTex.width, newTex.height);
                for (int i = 0; i &lt; newTex.height; i++)
                {
                    for (int j = 0; j &lt; newTex.width; j++)
                    {
                        if (deformMode == DeformMode.RaiseLower)
                        {
                            areaT[i, j] = areaT[i, j] - craterData[i * newTex.width + j].a * strengthSave / 15000;
                        }
                        else if (deformMode == DeformMode.Flatten)
                        {
                            areaT[i, j] = Mathf.Lerp(areaT[i, j], flattenTarget, craterData[i * newTex.width + j].a * strengthNormalized);
                        }
                        else if (deformMode == DeformMode.Smooth)
                        {
                            if (i == 0 || i == newTex.height - 1 || j == 0 || j == newTex.width - 1)
                                continue;

                            float heightSum = 0;
                            for (int ySub = -1; ySub &lt;= 1; ySub++)
                            {
                                for (int xSub = -1; xSub &lt;= 1; xSub++)
                                {
                                    heightSum += areaT[i + ySub, j + xSub];
                                }
                            }

                            areaT[i, j] = Mathf.Lerp(areaT[i, j], (heightSum / 9), craterData[i * newTex.width + j].a * strengthNormalized);
                        }
                    }
                }
                tData.SetHeights(x - newTex.width / 2, z - newTex.height / 2, areaT);
            }
        }
    }

    void brushScaling()
    {
        //Apply current deform texture resolution 
        newTex = Instantiate(deformTexture) as Texture2D;
      //  TextureScale.Point(newTex, deformTexture.width * (int)area / 10, deformTexture.height * (int)area / 10);
        newTex.Apply();
        craterData = newTex.GetPixels();
    }

    void wheelValuesControl()
    {
        float mouseWheel = Input.GetAxis(&quot;Mouse ScrollWheel&quot;);
        if (Mathf.Abs(mouseWheel) &gt; 0.0)
        {
            if (mouseWheel &gt; 0.0)
            {
                //More
                if (!Input.GetKey(KeyCode.LeftShift))
                {
                    if (area &lt; 13)
                    {
                        area += 0.5f;
                    }
                    else
                    {
                        area = 13;
                    }
                }
                else
                {
                    if (strength &lt; 13)
                    {
                        strength += 0.5f;
                    }
                    else
                    {
                        strength = 13;
                    }
                }
            }
            else if (mouseWheel &lt; 0.0)
            {
                //Less
                if (!Input.GetKey(KeyCode.LeftShift))
                {
                    if (area &gt; 1)
                    {
                        area -= 0.5f;
                    }
                    else
                    {
                        area = 1;
                    }
                }
                else
                {
                    if (strength &gt; 1)
                    {
                        strength -= 0.5f;
                    }
                    else
                    {
                        strength = 1;
                    }
                }
            }
            if (area &gt; 1)
                brushScaling();
        }
    }

    //GUI
    //______________________________________________________________________________________________________________________________
    void OnGUI()
    {
        windowRect = GUI.Window(0, windowRect, TerrainEditorWindow, &quot;Terrain Sculptor&quot;);

        GUILayout.BeginArea(new Rect(Screen.width - 70, 10, 60, 30));
        showHelp = GUILayout.Toggle(showHelp, &quot;(Help)&quot;, new GUILayoutOption[] { GUILayout.Width(60.0f), GUILayout.Height(30.0f) });
        GUILayout.EndArea();

        if (showHelp)
        {
            //Help window properties
            GUI.Window(1, new Rect(Screen.width - 410, 50, 400, 120), HelpWindow, &quot;Help Window&quot;);
        }
    }

    //Help window display tips and tricks
    void HelpWindow(int windowId)
    {
        GUILayout.BeginVertical(&quot;box&quot;);
        {
            GUILayout.Label(&quot;- Mouse wheel - area change&quot;);
            GUILayout.Label(&quot;- Mouse wheel + Shift - strength change&quot;);
            GUILayout.Label(&quot;- Hold Shift in RaiseLower mode to lower terrain&quot;);
        }
        GUILayout.EndVertical();
    }

    void TerrainEditorWindow(int windowId)
    {
        //Detect when mouse cursor inside region (TerrainEditorWindow)
        GUILayout.BeginArea(new Rect(0, 0, 400, 240));
        if (GUILayoutUtility.GetRect(10, 50, 400, 240).Contains(Event.current.mousePosition))
        {
            onWindow = true;
        }
        else
        {
            onWindow = false;
        }
        GUILayout.EndArea();

        GUILayout.BeginVertical();

        //Shared GUI
        GUILayout.Space(10f);
        GUILayout.BeginHorizontal();
        GUILayout.Label(&quot;Area:&quot;, new GUILayoutOption[] { GUILayout.Width(75f) });
        area = GUILayout.HorizontalSlider(area, 1f, 13f, new GUILayoutOption[] { GUILayout.Width(250f), GUILayout.Height(15f) });
        GUILayout.Label((Mathf.Round(area * 100f) / 100f).ToString(), new GUILayoutOption[] { GUILayout.Width(250f), GUILayout.Height(20f) });
        //Change brush texture size if area value was changed
        if (GUI.changed)
        {
            brushScaling();
        }
        GUILayout.EndHorizontal();

        GUILayout.Space(10f);
        GUILayout.BeginHorizontal();
        GUILayout.Label(&quot;Strength:&quot;, new GUILayoutOption[] { GUILayout.Width(75f) });
        strength = GUILayout.HorizontalSlider(strength, 1f, 13f, new GUILayoutOption[] { GUILayout.Width(250f), GUILayout.Height(15f) });
        GUILayout.Label((Mathf.Round(strength * 100f) / 100f).ToString(), new GUILayoutOption[] { GUILayout.Width(250f), GUILayout.Height(20f) });
        GUILayout.EndHorizontal();

        //Deform GUI
        GUILayout.Space(10);

        deformMode = (DeformMode)GUILayout.Toolbar((int)deformMode, deformModeNames, GUILayout.Height(25));

        GUILayout.Space(10);

        GUILayout.BeginHorizontal();
        if (GUILayout.Button(&quot;Reset Terrain Height&quot;, new GUILayoutOption[] { GUILayout.Height(30f) }))
        {
            tData.SetHeights(0, 0, saved);
        }
        GUILayout.EndHorizontal();

        GUILayout.EndVertical();
    }

    void OnApplicationQuit()
    {
        //Reset terrain height when exiting play mode
        tData.SetHeights(0, 0, saved);
    }
}
</code></pre>
        </div>

        <!-- Footer -->
        <footer class="w3-container w3-padding-32 w3-dark-grey">
            <div class="w3-row-padding">
                <div class="w3-half" style="width: 25%;">
                    <h3 style="color: #a0cc1b !important;">Random Quote</h3>
                    <p id="footer"></p>
                </div>
                <div class="w3-half" style="width: 75%;">
                    <h3 style="color: #a0cc1b !important;">Popular Scripts</h3>
                    <p id="elements">

                    </p>
                </div>

            </div>
        </footer>

        <div class="w3-black w3-center">
            Powered by
            <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a>
        </div>

        <!-- End page content -->
    </div>

    <script>
        // Script to open and close sidebar
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
            document.getElementById("myOverlay").style.display = "block";
        }

        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
            document.getElementById("myOverlay").style.display = "none";
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
                hljs.initLineNumbersOnLoad();
            });
        });
        
        function create_zip() {
            var content = zip.generate();
            location.href = "data:application/zip;base64," + content;
        }
        var zip = new JSZip();
        function addto_zip(name, value) {
            zip.add(name, value);
        }
 const colors = [{"TerrainEditorv2.cs": "/Open World/scripts/Terrain Editorv2/TerrainEditorv2.cs"}
,{"NewInput.cs": "/Open World/scripts/New Input/NewInput.cs"}
,{"TextureScale.cs": "/Open World/scripts/Texture Scale/TextureScale.cs"}
];


        $.each(colors, function () {
            $.each(this, function (name, url) {
                $.ajax({
                    async: true,
                    type: 'GET',
                    url: `${url}`,
                    success: function (data) {
                        addto_zip(`${name}`, data)
                    }
                });
            });
        });
       // create_zip();
        
        /*/ReplaceWithMethod/*/
        function myFunction(btnele, elementid) {

            var xbtn = document.getElementById(btnele);

            var x = document.getElementById(elementid);
            if (x.style.display === "none") {
                x.style.display = "block";
                xbtn.innerText = "Hide Content";
            } else {
                x.style.display = "none";
                xbtn.innerText = "Show Content";
            }
        }

        function ToggleIt(btneleindex, elementid) {
            console.log("Here");
            var i;
            var coll = document.getElementsByClassName("content");

            var x = document.getElementById(elementid);

            for (i = 0; i < coll.length; i++) {
                coll[i].style.display = "none";                   
            }
            x.style.display = "inline";
        }

        
 var messages =['\ Aim Assist','\ Async Operation Progress Example','\ Audio Manager','\ Base Item Scriptable','\ Base Npc Scriptable','\ Base Vehicle Scriptable','\ Base Vehicle Trailer Scriptable','\ Binoculars','\ Camera Extensions','\ Camera Raycaster','\ Car Controller','\ Change Terrain Height_line Marker','\ Character Customization Camera','\ Character Customization GUI','\ Collectable','\ Collectable Object','\ Collectables','\ Color Picker','\ Custom Tags','\ Custom Tag System','\ Experience','\ Explosive','\ Flash Light','\ Fuel Pump','\ Fuel Station','\ Fuel System','\ Game Manager','\ Game Object Extensions','\ Global Static Data','\ Grid Placement','\ Grid Placement Move Object','\ Interaction','\ Interaction Raycaster','\ Item','\ Line Renderer Route','\ List Extensions','\ Loading Screen','\ Minimap','\ Mirror Reflection','\ Modular Construction','\ My Colors','\ New Input','\ New Input Test','\ Nothing But Math','\ NPC','\ Object Damageable','\ Painter','\ Pause Game','\ PIDController','\ Player Camera','\ Player Manager','\ Raise Lower Terrain','\ Recalculate Bounds','\ Rotate Me','\ Saveables','\ Save Texture To File','\ Singleton','\ Singleton Dont Destroy On Load','\ Spawner','\ String Extensions','\ Target Object','\ Terrain Adjuster Runtime','\ Terrain Editorv2','\ Texture Scale','\ TMP_ Dropdown Extensions','\ Trailer Controller','\ Trailer Landing Gear','\ Transform Extensions','\ Vechile Fuel','\ Vehicle Controller','\ Vehicle Controller AI Control','\ Vehicle Door Controller','\ Vehicle Trailer Controller','\ Vehicle Wheel Layout','\ Visual Waypoint Route','\ Weapon Manager','\ Weapon Scriptable',]
        function getMessage() {
            return messages[Math.floor(Math.random() * messages.length)];
        }
        function RandomTagScripts() {
            var rnd = Math.floor(Math.random() * 15) + 5;
            for (i = 0; i < rnd; i++)
            {
                $("#elements").append(" <a href='#'><span class='w3-tag w3-grey w3-small w3-margin-bottom'>" + getMessage() + " </span></a>");
            }
        }
        var quoutes = ["“It’s harder to read code than to write it.” — Joel Spolsky"
            , "“Code never lies; comments sometimes do.” — Ron Jeffries", "“There are two hard things in computer science: cache invalidation, naming things, and off-by-one errors.” — Leon Bambrick",
            "“Give a man a program, frustrate him for a day.Teach a man to program, frustrate him for a lifetime.” ― Muhammad Waseem",
            "“Some of the best programming is done on paper, really. Putting it into the computer is just a minor detail.” ― Max Kanat - Alexander",
            "“You Disingenuous Dense Motherfucker.” ― DarkViperAU", "“i am committed to push my branch to the master” ― Halgurd Hussein",
            "“Web development is difficult, only then it is fun to do. You just have to set your standards. If it were to be easy, would anyone do it?” ― Olawale Daniel"]
        function getQuoute() {
            return quoutes[Math.floor(Math.random() * quoutes.length)];
        }
        $("#footer").append(" " + getQuoute() + " ");

        RandomTagScripts();
    </script>

</body>

</html>