<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title id="seotitle">Unity3D Open World Project -DevBeeBee</title>
    <meta id="seokeys" name="keywords" content="Unity3D, Open World, Project">
    <meta id="seodescription" name="description" content="">
    <meta name=”robots” content="index, follow">
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="true" />

    <link id="codeCSS" rel="stylesheet" href="/css/hybrid.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="/css/my.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script type="text/javascript" src="/js/jszip.js"></script>
    <script type="text/javascript" src="/js/jQuery.js"></script>
    <script type="text/javascript" src="/js/savecs.js"></script>
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9754975194862641" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122930112-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-122930112-1');
    </script>
    <style>
        #spoilern {
            width: 100%;
            padding: 50px 0;
            text-align: center;
            background-color: lightblue;
            margin-top: 20px;
        }

        #spoilerbtnn {
            -webkit-text-size-adjust: 100%;
            box-sizing: inherit;
            font: inherit;
            text-transform: none;
            -webkit-appearance: button;
            color: #fff !important;
            background-color: #616161 !important;
            border: none;
            border-radius: 5px;
            padding: 8px 16px;
            vertical-align: middle;
            overflow: hidden;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            white-space: nowrap;
            user-select: none;
            box-shadow: none;
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        pre {
            width: 90%;
            margin: 20px;
            margin-left: 5%;
            margin-top: 4px;
            /* margin: -20px; */
        }

        .collapsible {
            background-color: #777;
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
        }

            .active, .collapsible:hover {
                background-color: #555;
            }

        .content {
            display: none;
            overflow: hidden;
        }
    </style>
</head>

<body class="w3-content" style="max-width:1600px">

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-collapse w3-animate-left" style="background-color: #0b0b0b; z-index:3;width:300px;" id="mySidebar">
        <br>
        <div class="w3-container">
            <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
                <i class="fa fa-remove"></i>
            </a>

            <h4><b>DevBeeBee</b></h4>
            <p class="w3-text-grey">A Place for all the thing's i have learned around coding.</p>
        </div>
        <div class="w3-bar-block">
            <a href="/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-text-teal">
                <i class="fa fa-th-large fa-fw w3-margin-right"></i>Home
            </a>
            <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-padding myNav">
                <i class="fa fa-user fa-fw w3-margin-right"></i>C# & Unity
            </a>
            <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-padding myNav">
                <i class="fa fa-user fa-fw w3-margin-right"></i>HTML JS CSS
            </a>
        </div>
        <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="devbeebee" data-color="#5F7FFF" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff"
                data-coffee-color="#FFDD00"></script>
    </nav>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:300px">

        <!-- Header -->
        <header id="portfolio">

            <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()">
                <i class="fa fa-bars"></i>
            </span>
            <div class="w3-container">
                <h1 id="pagename" style="text-align: center;"><b>Terrain Adjuster Runtime</b></h1>
            </div>
        </header>
        
        <p style='text-align: center;font-variant: small-caps;'><a href='/Open World/'>Open World</a> - <a href='/Open World/scripts'>Scripts</a> -  Terrain Adjuster Runtime</p><h1>TITLE</h1>
        <div id="mainscript">
            <h4 style="text-align: center;" id="mainscriptname">TerrainAdjusterRuntime.cs <sup >5.1KB</sup></h4>
            <p style='text-align:center;'></p>
            <button class='center'onclick='create_zip()'>Download File 5.1KB</button><br>
            <pre ><code style='font-size: 12px;'class='language-csharp hljs'id='mainscriptcode'>using System.Collections.Generic;
using UnityEngine;
using UnityEditor;

[ExecuteInEditMode]
public class TerrainAdjusterRuntime : MonoBehaviour
{
    public Terrain terrain;
    public SplineDone pathCreator;
    public float brushFallOff = 0.3f;
    float[,] originalTerrainHeights;

    void Start()
    {
        SaveOriginalTerrainHeights();
    }

    void SaveOriginalTerrainHeights()
    {
        TerrainData terrainData = terrain.terrainData;

        int w = terrainData.heightmapResolution;
        int h = terrainData.heightmapResolution;

        originalTerrainHeights = terrainData.GetHeights(0, 0, w, h);

    }

    void Update()
    {
        if (terrain &amp;&amp; pathCreator)
        {
            ShapeTerrain(pathCreator);
        }
    }

   public void ShapeTerrain(SplineDone currentPathCreator)
    {
        SaveOriginalTerrainHeights();
        Terrain currentTerrain = terrain;
        Vector3 terrainPosition = currentTerrain.gameObject.transform.position;
        TerrainData terrainData = currentTerrain.terrainData;

        // both GetHeights and SetHeights use normalized height values, where 0.0 equals to terrain.transform.position.y in the world space and 1.0 equals to terrain.transform.position.y + terrain.terrainData.size.y in the world space
        // so when using GetHeight you have to manually divide the value by the Terrain.activeTerrain.terrainData.size.y which is the configured height (&quot;Terrain Height&quot;) of the terrain.
        float terrainMin = currentTerrain.transform.position.y + 0f;
        float terrainMax = currentTerrain.transform.position.y + currentTerrain.terrainData.size.y;
        float totalHeight = terrainMax - terrainMin;

        int w = terrainData.heightmapResolution;
        int h = terrainData.heightmapResolution;

        // clone the original data, the modifications along the path are based on them
        float[,] allHeights = originalTerrainHeights.Clone() as float[,];

        // the blur radius values being used for the various passes
        int[] initialPassRadii = { 15, 7, 2 };

        for (int pass = 0; pass &lt; initialPassRadii.Length; pass++)
        {
            int radius = initialPassRadii[pass];


            // equi-distant points
            List&lt;Vector3&gt; distancePoints = new List&lt;Vector3&gt;();

            // spacing along the array, can speed up the loops
            float arrayIterationSpacing = .1f;

            for (float t = 0; t &lt;= 1; t += arrayIterationSpacing)
            {
                Vector3 point = currentPathCreator.GetPositionAt(t);

                distancePoints.Add(point);
            }

            // sort by height reverse
            // sequential height raising would just lead to irregularities, ie when a higher point follows a lower point
            // we need to proceed from top to bottom height
            distancePoints.Sort((a, b) =&gt; -a.y.CompareTo(b.y));

            Vector3[] points = distancePoints.ToArray();

            foreach (var point in points)
            {

                float targetHeight = (point.y - terrainPosition.y) / totalHeight;

                int centerX = (int)(currentPathCreator.transform.position.z + point.z);
                int centerY = (int)(currentPathCreator.transform.position.x + point.x);

                AdjustTerrain(allHeights, radius, centerX, centerY, targetHeight);

            }
        }

        currentTerrain.terrainData.SetHeights(0, 0, allHeights);
    }

    private void AdjustTerrain(float[,] heightMap, int radius, int centerX, int centerY, float targetHeight)
    {
        float deltaHeight = targetHeight - heightMap[centerX, centerY];
        int sqrRadius = radius * radius;

        int width = heightMap.GetLength(0);
        int height = heightMap.GetLength(1);

        for (int offsetY = -radius; offsetY &lt;= radius; offsetY++)
        {
            for (int offsetX = -radius; offsetX &lt;= radius; offsetX++)
            {
                int sqrDstFromCenter = offsetX * offsetX + offsetY * offsetY;

                // check if point is inside brush radius
                if (sqrDstFromCenter &lt;= sqrRadius)
                {
                    // calculate brush weight with exponential falloff from center
                    float dstFromCenter = Mathf.Sqrt(sqrDstFromCenter);
                    float t = dstFromCenter / radius;
                    float brushWeight = Mathf.Exp(-t * t / brushFallOff);

                    // raise terrain
                    int brushX = centerX + offsetX;
                    int brushY = centerY + offsetY;

                    if (brushX &gt;= 0 &amp;&amp; brushY &gt;= 0 &amp;&amp; brushX &lt; width &amp;&amp; brushY &lt; height)
                    {
                        heightMap[brushX, brushY] += deltaHeight * brushWeight;

                        // clamp the height
                        if (heightMap[brushX, brushY] &gt; targetHeight)
                        {
                            heightMap[brushX, brushY] = targetHeight;
                        }
                    }
                }
            }
        }
    }
}</code></pre>
        </div>

        <!-- Footer -->
        <footer class="w3-container w3-padding-32 w3-dark-grey">
            <div class="w3-row-padding">
                <div class="w3-half" >
                    <h3 style="color: #a0cc1b !important;">Random Quote</h3>
                    <p id="footer"></p>
                </div>
                <div class="w3-half" >
                    <h3 style="color: #a0cc1b !important;">Popular Scripts</h3>
                    <p id="elements">

                    </p>
                </div>

            </div>
        </footer>

        <div class="w3-black w3-center">
            Powered by
            <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a>
        </div>

        <!-- End page content -->
    </div>

    <script>
        // Script to open and close sidebar
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
            document.getElementById("myOverlay").style.display = "block";
        }

        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
            document.getElementById("myOverlay").style.display = "none";
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
                hljs.initLineNumbersOnLoad();
            });
        });

        function create_zip() {
            var content = zip.generate();
            location.href = "data:application/zip;base64," + content;
        }
        var zip = new JSZip();
        function addto_zip(name, value) {
            zip.add(name, value);
        }
     const colors = [{"TerrainAdjusterRuntime.cs": "/Open World/scripts/Terrain Adjuster Runtime/TerrainAdjusterRuntime.cs"}
];


            $.each(colors, function () {
                $.each(this, function (name, url) {
                    $.ajax({
                        async: true,
                        type: 'GET',
                        url: `${url}`,
                        success: function (data) {
                            addto_zip(`${name}`, data)
                        }
                    });
                });
            });
           // create_zip();
            
            /*/ReplaceWithMethod/*/
            function myFunction(btnele, elementid) {

                var xbtn = document.getElementById(btnele);

                var x = document.getElementById(elementid);
                if (x.style.display === "none") {
                    x.style.display = "block";
                    xbtn.innerText = "Hide Content";
                } else {
                    x.style.display = "none";
                    xbtn.innerText = "Show Content";
                }
            }

        function ToggleIt(btneleindex, elementid) {
            console.log("Here");
            var i;
            var coll = document.getElementsByClassName("content");

            var x = document.getElementById(elementid);

            for (i = 0; i < coll.length; i++) {
                coll[i].style.display = "none";
            }
            x.style.display = "inline";
        }


     var messages =['\ Aim Assist','\ Async Operation Progress Example','\ Audio Manager','\ Base Item Scriptable','\ Base Npc Scriptable','\ Base Vehicle Scriptable','\ Base Vehicle Trailer Scriptable','\ Binoculars','\ Camera Extensions','\ Camera Raycaster','\ Car Controller','\ Change Terrain Height_line Marker','\ Character Customization Camera','\ Character Customization GUI','\ Collectable','\ Collectable Object','\ Collectables','\ Color Picker','\ Custom Tags','\ Custom Tag System','\ Experience','\ Explosive','\ Flash Light','\ Fuel Pump','\ Fuel Station','\ Fuel System','\ Game Manager','\ Game Object Extensions','\ Global Static Data','\ Grid Placement','\ Grid Placement Move Object','\ Interaction','\ Interaction Raycaster','\ Item','\ Line Renderer Route','\ List Extensions','\ Loading Screen','\ Minimap','\ Mirror Reflection','\ Modular Construction','\ My Colors','\ New Input','\ New Input Test','\ Nothing But Math','\ NPC','\ Object Damageable','\ Painter','\ Pause Game','\ PIDController','\ Player Camera','\ Player Manager','\ Raise Lower Terrain','\ Recalculate Bounds','\ Rotate Me','\ Saveables','\ Save Texture To File','\ Singleton','\ Singleton Dont Destroy On Load','\ Spawner','\ String Extensions','\ Target Object','\ Terrain Adjuster Runtime','\ Terrain Editorv2','\ Texture Scale','\ TMP_ Dropdown Extensions','\ Trailer Controller','\ Trailer Landing Gear','\ Transform Extensions','\ Vechile Fuel','\ Vehicle Controller','\ Vehicle Controller AI Control','\ Vehicle Door Controller','\ Vehicle Trailer Controller','\ Vehicle Wheel Layout','\ Visual Waypoint Route','\ Weapon Manager','\ Weapon Scriptable',]
            function getMessage() {
                return messages[Math.floor(Math.random() * messages.length)];
            }
        function RandomTagScripts() {
            var rnd = Math.floor(Math.random() * 15) + 5;
            for (i = 0; i < rnd; i++) {
                $("#elements").append(" <a href='#'><span class='w3-tag w3-grey w3-small w3-margin-bottom'>" + getMessage() + " </span></a>");
            }
        }
        var quoutes = ["“It’s harder to read code than to write it.” — Joel Spolsky"
            , "“Code never lies; comments sometimes do.” — Ron Jeffries", "“There are two hard things in computer science: cache invalidation, naming things, and off-by-one errors.” — Leon Bambrick",
            "“Give a man a program, frustrate him for a day.Teach a man to program, frustrate him for a lifetime.” ― Muhammad Waseem",
            "“Some of the best programming is done on paper, really. Putting it into the computer is just a minor detail.” ― Max Kanat - Alexander",
            "“You Disingenuous Dense Motherfucker.” ― DarkViperAU", "“i am committed to push my branch to the master” ― Halgurd Hussein",
            "“Web development is difficult, only then it is fun to do. You just have to set your standards. If it were to be easy, would anyone do it?” ― Olawale Daniel",
            "“Programming is learned by writing programs.” ― Brian Kernighan",
            "“ Code is like humor. When you have to explain it, it’s bad.” – Cory House",
            "“Whether you want to uncover the secrets of the universe, or you just want to pursue a career in the 21st century, basic computer programming is an essential skill to learn.” ― Stephen Hawking"]
        function getQuoute() {
            return quoutes[Math.floor(Math.random() * quoutes.length)];
        }
        $("#footer").append(" " + getQuoute() + " ");

        RandomTagScripts();
    </script>

</body>

</html>